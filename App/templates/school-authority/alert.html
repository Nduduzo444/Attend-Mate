{% extends "school-authority/base.html" %}

{% block content %}

<h2>View Alerts</h2>
<div class="container">
{% if alerts %}
<table class="table table-striped table-bordered mt-3">
    <thead class="thead-dark">
        <tr>
            <th>Child</th>
            <th>Status</th>
            <th>Timestamp</th>
        </tr>
    </thead>
    <tbody>
        {% for alert in alerts %}
        <tr>
            <td>{{ alert.child.full_name }}</td>
            <td>{{ alert.status }}</td>
            <td>{{ alert.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info mt-3" role="alert">
    No alerts available for your managed grade.
</div>
{% endif %}

{% if get_flashed_messages(with_categories=true) %}
<div class="mt-3">
    <ul class="list-unstyled">
        {% for category, message in get_flashed_messages(with_categories=true) %}
        <li class="alert alert-{{ 'success' if category == 'success' else 'danger' if category == 'danger' else 'info' }}">{{ message }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}
</div>
{% endblock %}